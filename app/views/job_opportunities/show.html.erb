<%= render(BoxComponent.new) do |box| %>
  <% box.title do %>
    <%= @job_opportunity.job_title %> (<%= t(".#{@job_opportunity.status}") %>)
  <% end %>

  <% box.body do %>
    <p><%= t('.company') %>: <%= @job_opportunity.company.name %></p>
    <p><%= t('.job_level') %>: <%= @job_opportunity.job_level %></p>
    <p><%= t('.description') %>: <%= @job_opportunity.description %></p>
    <p><%= t('.salary_range') %>: <%= @job_opportunity.salary_range %></p>
    <p><%= t('.place') %>: <%= @job_opportunity.place %></p>
    <p><%= t('.limit_date') %>: <%= @job_opportunity.limit_date %></p>

    <%= employee_links(@job_opportunity) %>
    <%= candidate_links(@job_opportunity) %>
  <% end %>
<% end %>

<% if @employee %>
  <%= render(BoxComponent.new) do |box| %>
    <% box.title do %>
      Candidaturas recebidas para esta vaga:
    <% end %>
    
    <% box.body do %>
      <% if @job_applications.size.positive? %>
        <% @job_applications.each do |a| %>
          <%= render(ListItemComponent.new) do |component| %>
            <% component.button { job_application_links(a) } %>
            <div class="flexrow">
              <%= link_to(user_avatar(a.candidate, size: '45x45'), candidate_path(a.candidate)) %>
              <div>
                <b><%= a.candidate.full_name %> (<%= t(".job_applications.status.#{a.status}") %>)</b><br>
                <%= link_to("Ver perfil", candidate_path(a.candidate)) %>
              </div>
            </div>
            
          <% end %>
        <% end %>
      <% else %>
        <div class="empty_state"><%= t('.job_applications.empty_state') %></div>
      <% end %>
    <% end %>
  <% end %>
<% end %>
