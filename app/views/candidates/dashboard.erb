<%= render(PageComponent.new) do |component| %>
  <%= component.sidebar do %>
    <%= render(BoxComponent.new) do |box| %>
      <%= box.title do %>
        <%= user_avatar(@candidate, size: '20x20') %>
        <%= @candidate.full_name %>
      <% end %>
      <%= box.body do %>
        <p><%= t_attr('candidate.document') %>: <%= @candidate.document %></p>
        <%= candidate_locale(@candidate.address) %>
        <%= candidate_website(@candidate.website) %>        
        <%= link_to 'Editar meus dados', edit_candidate_registration_path(@candidate) %>
        <%= link_to 'Meu perfil', candidate_path(@candidate) %>
      <% end %>
    <% end %>
  <% end %>

  <%= component.main_content do %>
    <%= render(BoxComponent.new) do |component| %>
      <% component.title { t('.applications') } %>
      <% component.body do %>
        <% if @candidate.job_applications.count > 0 %>
          <% @candidate.job_applications.each do |job_application| %>
            <%= render(ListItemComponent.new) do %>
              <%= link_to job_application.job_opportunity.job_title, job_application_path(job_application) %>
            <% end %>
          <% end %>
        <% else %>
          <div class="empty_state"><%= t('.empty_state.job_application') %></div>
        <% end %>
      <% end %>
    <% end %>

    <%= render(BoxComponent.new) do |component| %>
      <% component.title { t('.proposals') } %>
      <% component.body do %>
        <% unless @candidate.job_proposals.count == 0 %>
          <% @candidate.job_proposals.each do |proposal| %>
            <%= render(ListItemComponent.new) do %>
              <%= link_to "#{proposal.job_application.job_opportunity.job_title} - #{proposal.job_application.company.name} (#{proposal.status})", job_application_job_proposal_path(proposal.job_application, proposal) %>
            <% end %>
          <% end %>
        <% else %>
          <div class="empty_state"><%= t('.empty_state.job_proposal') %></div>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
<% end %>